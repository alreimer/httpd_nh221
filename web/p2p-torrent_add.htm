<!-- added by RAW -->
<!--#include area="0:firmware" area="0:file_name" area="0:nfile"
file="head.inc?name=Home%20Page" 
file="side.inc?i=6&helper=1" -->

<table id="maintab" height=290 align="center"><tr>
<td align="center" valign="top"><br>
<table id="header" align="center"><tr><td><b>Torrents :: Upload</b></td></tr></table>
<br>
<!--<table border="0" width="70%" height="40" align="center">

<tr><td width=2% valign=top></td>
<td width=80% align=left><font color="#FFFFFF" size=2 face="Arial, Helvetica, sans-serif"><b>Please provide .</b></font></td></tr></table>-->
<br>
<table border="0" width="70%" height="50" align="center">
<tr><td></td><td id="varbox-list-name"><b><font size="3">&nbsp;ls -l torrents:</font></b></td><td></td><td></td></tr>
<tr><td colspan="4">
<table border="0" width="100%" height="40" align="center">
<!-- #include shell=""cd /mnt/torrents/ 2>/dev/null; [ $? -eq 0 ] && for i in * ; do [[ -f \"$i\" ]] && echo \"<tr><td><pre>$(ls -l \"$i\")</pre></td><td><a href=\\\"torrent_remove.cgi?t_remove=$i\\\">remove</a></td></tr>\"; done "" -->
</table>
</td></tr>
<tr><td></td><td></td>
<td id="varbox-list-val">
</td><td></td></tr>
</table>

<br>
<table border="0" width="70%" height="50" align="center">
<form name=form1 method="POST" enctype="multipart/form-data" action="torrent_upload.cgi">
<tr><td></td><td id="varbox-list-name"><b><font size="3">&nbsp;Upload torrent file:</font></b></td><td></td><td></td></tr>
<tr><td colspan="4">
<br><b>Please input the file name with full path:</b></td></tr>
<tr><td valign=top colspan="4">
<input type=file name=ufile size=50 maxlength=50 value=""></td></tr>

<tr><td></td><td></td><td id="varbox-list-val"><input type=submit name=submit value="Apply" onclick="check_form()">&nbsp;<input type=reset value="Reset"></td></tr>
</form></table>
<br>
<!--<table border="0" width="70%" height="50" align="center">
<form method="GET" action="torrent_remove.cgi" name="torrent-remove">
<tr><td></td><td id="varbox-list-name"><b><font size="3">&nbsp;Remove file:</font></b></td><td></td><td></td></tr>
<tr><td colspan="4"><input type="text" name="t_remove" size="60"></td></tr>
<tr><td></td><td>Example:...</td>
<td id="varbox-list-val"><input type="submit" name="remove" value="Apply">&nbsp;<input type="reset" value="Cancel"></td><td></td></tr>
</table></form>
<br>-->

<!--
<table id="info" align="center">
<tr><td><br>Syslog info <a href="syslog.cgi">here</a></td></tr>
<tr><td>Smbpasswd <a href="serv-smb_add.htm">here</a></td></tr>
</table>
-->
<table><tr>
<td align="center"><br><input type="button" value="Back" onclick="history.back()"></td></tr>
</table>


<script language="JavaScript">
function help_popUp() {
var g = window.open('http://??_srv_ip??:??_srv_port??/help/p2p-torrent_add.help', 'name', 'toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=0,resizable=1,width=700,height=700');
}
function check_form(){
    un = document.form1.ufile.value;
    if (check_un()==0){
        warming_b("File Path");
        document.form1.ufile.focus();
        history.go(0);
        return;
    }// else
//        self.open('updatepop.html','OK','alwaysRaised,resizable,scrollbars,width=275,height=120');
//        location.replace('updatepop.html');	//will be made by serever: rAW
}
function check_un(){
    var ok=1;
//    var count = document.form1.ufile.length;	//check, this unused value(undefined) : RAW
//alert(un +"  "+ count);
    if (un==null||un==""){
        ok=0;
    }
    return ok;
}
function warming_b(){
    alert(arguments[0]+": Can not be blank!");
}
</script>
</td></tr></table></body></html>

<!-- CGI: torrent_upload.cgi
    get_file "./JavaReturn_.inc?name=Home%20Page&i=6";

    print "<tr><td><pre>";
//	save_bfile "ufile:0:/L/L/[/*.torrent/:/mnt/torrents/*";
	save_bfile "ufile:0:firmware:file_name"{
	    print "error</pre></td></tr></table><a href=\"p2p-torrent_add.htm\">Back</a></table></body></html>";
	    exit_cgi;
	}
	write_ppar "file_name:nfile:/L/L/[/*.torrent/"{
	    print "Error: ??file_name?? not matches to parsestr
</pre></td></tr></table><a href=\"p2p-torrent_add.htm\">Back</a></table></body></html>";
	    exit_cgi;
	}
	save_file_full "firmware:/mnt/torrents/??nfile??";

    print "</pre></td></tr></table><a href=\"p2p-torrent_add.htm\">Back</a></table></body></html>";

END_CGI -->
<!-- CGI: torrent_remove.cgi

    set "a=1";
    remove_chars ";:/\"<>`'$*?|::_#t_remove";

    if_set "a == 1"{
//    not "_#t_remove:/*.//"{
    get_file "./JavaReturn_.inc?name=Home%20Page&i=6";

    print "<tr><td>Remove file:</td><td> ??_#t_remove??</td></tr>
    <tr><td colspan=\"2\"><pre>";
    my_shell "rm \"/mnt/torrents/??_#t_remove??\"
	[ $? -eq 0 ] && echo \"File ??_#file_name?? removed\"";
    print "</pre></td></tr></table><a href=\"p2p-torrent_add.htm\">Back</a></table></body></html>";
    exit_cgi;
//    }
    }
    boot_page "p2p-torrent_add.htm";
END_CGI -->
